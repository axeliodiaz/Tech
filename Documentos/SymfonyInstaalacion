Installing Symfony2

First, check that the PHP version installed on your computer meets the Symfony2 requirements: 5.3.3 or higher. Then, open a console and execute the following command to install the latest version of Symfony2 in the myproject/ directory:
-	Instalar composer
apt-get install curl
	 curl -s https://getcomposer.org/installer | php5
	
	$ composer create-project symfony/framework-standard-edition myproject/ ~2.4


Composer is the package manager used by modern PHP applications and the only recommended way to install Symfony2. To install Composer on your Linux or Mac system, execute the following commands:


	$ curl -sS https://getcomposer.org/installer | php5
	$ sudo mv composer.phar /usr/local/bin/composer

1. instalacion de openssl

	mkdir ~/src
	cd ~/src
	wget http://www.openssl.org/source/openssl-1.0.0g.tar.gz
	tar -xzf openssl-1.0.0g.tar.gz 
	cd openssl-1.0.0g
	./Configure --prefix=$HOME linux-x86_64
	make
	make install

2.Install Curl
	cd ~/src
	wget http://curl.haxx.se/download/curl-7.24.0.tar.gz
	tar -xzf curl-7.24.0.tar.gz 
	cd curl-7.24.0
	./configure --prefix=$HOME --with-ssl=$HOME/lib
	make
	make install

3.

	./configure --prefix=$HOME --with-pdo-mysql --with-pdo-pgsql=/usr/share/postgresql/9.3 --enable-bcmath --enable-calendar --enable-exif --enable-ftp --enable-mbstring --enable-soap --enable-zip --with-curl=$HOME --with-freetype-dir --with-gd --with-gettext --with-gmp --with-iconv --with-jpeg-dir --with-kerberos --with-mhash --with-mysql --with-mysqli --with-openssl=$HOME --with-pgsql=/usr/share/postgresql/9.3 --with-png-dir --with-regex --with-xmlrpc --with-xsl --with-zlib-dir --with-config-file-path=$HOME/lib --without-pear --enable-sockets --enable-intl --with-mysql-sock=/var/lib/mysql/mysql.sock


	Luego de mil vainas... 


4.PAra reiniciar Apache

	/ect/init.d/apache2 stop
	... start


5. Para iniciar el Servidor y Ver el Proyecto

	php5 app/console server:run

6. Para ver todos los comando existentes 

	php5 app/console list


7. Para crear un bundle php app/console generate:bundle --namespace=Ens/JobeetBundle --format=yml

c	php5 app/console generate:bundle --namespace=TechBundle --format=yml


8. Recordar Limpiar La CACHE 

	php5 app/console cache:clear --env=prod
	php5 app/console cache:clear --env=dev

9.Si te equivocaste y quieres eliminar el bundle 

	delete /src/Test/BlogBundle directory
	change /app/config/routing.yml file to remove the bundle routes
	remove your new bundle from /app/AppKernel.php
	clear cache (either by deleting cache/{$env} or console cache:clear)
	If this wasn't installed using a dependency manager - that should be all.

10. Creo la BD php5 app/console doctrine:database:create
PReferible es crearla en 

	http://localhost/PRO_TALLER_DES/phpmyadmin/

y asociar el usuario en privilegios


11. (Cada vez que se actualice la BD)
El schema debe generarse a partir de la base de datos dado que Symfony posee ORM


	php5 app/console doctrine:mapping:import --force TechTBundle yml

	php5 app/console doctrine:mapping:convert annotation ./src

	En caso de que no sea la primera vez
	(php5 app/console doctrine:mapping:convert annotation ./src --force)

	php5 app/console doctrine:generate:entities TechTBundle

	php5 app/console doctrine:schema:update --force

Para actualizar un Formulario  
Borrar el Form luego 

	php app/console generate:doctrine:form TechTBundle:Tbdetempresa 
 
Acomodar los view probar los controladores en la acciones asociadas
para los campos agregados



php5 app/console doctrine:mapping:import --force TechTBundle yml && php5 app/console doctrine:mapping:convert annotation ./src --force && php5 app/console doctrine:generate:entities TechTBundle && php5 app/console doctrine:schema:update --force && php5 app/console cache:clear --env=prod && php5 app/console cache:clear --env=dev 


12. Se generan las entidades 

	php5 app/console doctrine:generate:entities AcmeBlogBundle

	Borrar el PHP en caso de que se haga mal y volver a generar las entities


13. Se acomodan las clases de la base de datos generada que se encuentra en src en el bundle en la carpeta Resourse
luego entity


14. We will also ask Doctrine to create our database tables (or to update them to reflect our setup) with the command:

php5 app/console doctrine:schema:update --force
Updating database schema...
Database schema updated successfully! "7" queries were executed


15. Esto genera un crud completo

php5 app/console doctrine:generate: --entity=TechMyprojectBundle:Job --route-prefix=ens_job --with-write --format=yml
php5 app/console doctrine:generate:crud --entity=TechMyprojectBundle:Category --route-prefix=ens_category --with-write --format=yml

Renombrar el controlador 
Si el comando es Ambiguo usar php5 app/console generate:doctrine:crud
Cambiar el routing (Actualizarlo)

MEJOR HACER LO SIGUIENTE 
CREAR EL FORM Y LUEGO LOS SETTER Y GETTERS


16. Poner en routing.yml el parametro que importa las url

tech_myproject_homepage:
    pattern:  /hello/{name}
    defaults: { _controller: TechMyprojectBundle:Default:index }

TechMyprojectBundle_ens_job:
    resource: "@TechMyprojectBundle/Resources/config/routing/job.yml"
    prefix:   /ens_job

TechMyprojectBundle_ens_category:
    resource: "@TechMyprojectBundle/Resources/config/routing/category.yml"
    prefix:   /ens_category

17. Se pegan los CSs y 
php5 app/console assets:install web


http://jobeet.local/app_dev.php/job/



        {% if app.session.hasFlash('notice') %}
          <div class="flash_notice">
            {{ app.session.flash('notice') }}
          </div>
        {% endif %}
 
        {% if app.session.hasFlash('error') %}
          <div class="flash_error">
            {{ app.session.flash('error') }}
          </div>
        {% endif %}

18. Repositorio de entidades 

php5 app/console doctrine:generate:entities TechMyprojectBundle


    TechTBundle_tech_user:
        resource: "@TechTBundle/Resources/config/routing/user.yml"
        prefix:   /tech_user


------------------------------------------------------------------------------------
19. Para creacion de Admin usar
Tener el composer 
curl -sS https://getcomposer.org/installer | php5

php5 composer.phar require sonata-project/admin-bundle

Please provide a version constraint for the sonata-project/admin-bundle requirement: dev-master

20. Descargar sonata orm


php composer.phar require sonata-project/doctrine-orm-admin-bundle --no-update

completar todo y luego correr otra vez


php5 composer.phar require sonata-project/admin-bundle

completar todo y luego seguir como lo indica el tutorial joobet para el admin bundle CRUD case


21.En caso de Errores para cargar el SOnata to use sonata admin bundle , you need the following bundle in your composer.json :

    "knplabs/knp-snappy-bundle": "dev-master",
    "knplabs/knp-menu-bundle": "~1.1",
    "sonata-project/core-bundle": "2.2.4",
    "sonata-project/media-bundle": "2.2.7",
    "sonata-project/admin-bundle": "2.2.9",
    "sonata-project/notification-bundle": "2.2.4",
    "sonata-project/jquery-bundle": "1.8.x-dev",
    "sonata-project/cache-bundle": "2.1.5",
    "sonata-project/easy-extends-bundle": "2.1.4",
    "sonata-project/exporter": "1.3.1",
    "sonata-project/doctrine-extensions": "1.0.1",
    "knplabs/gaufrette": "dev-master",
    "sonata-project/block-bundle": "2.2.9",
    "sonata-project/doctrine-orm-admin-bundle": "2.2.6",
i use static version but if you want the lastest, feel free to replace each bundle version by "dev-master".

and my declaration in appKernel.php for sonata :

        new Knp\Bundle\SnappyBundle\KnpSnappyBundle(),
        new Knp\Bundle\MenuBundle\KnpMenuBundle(),

        new Sonata\DoctrineORMAdminBundle\SonataDoctrineORMAdminBundle(),
        new Sonata\CoreBundle\SonataCoreBundle(),
        new Sonata\BlockBundle\SonataBlockBundle(),
        new Sonata\CacheBundle\SonataCacheBundle(),
        new Sonata\jQueryBundle\SonatajQueryBundle(),
        new Sonata\AdminBundle\SonataAdminBundle(),
hope it will helps


22.-Datos curiosos 

Es posible cambiar la ruta del /blahblah 
si se cambia el prefix del siguiente archivo
sudo vi src/Tech/TBundle/Resources/config/routing.yml 



Para error esoterico proveniente de actualizacion de la bd 
Borrar formulario controlador entity vista actualizar la BD
Hacer el Crud 
Retornar los cambios en Entity de usuariosdatos y rol, tiporol (toString)




Problemas con integridad en crud 

rm src/Tech/TBundle/Entity/Tbdetusuarioacceso.php &&
rm src/Tech/TBundle/Form/TbdetusuarioaccesoType.php &&
rm src/Tech/TBundle/Controller/TbdetusuarioaccesoController.php &&
rm src/Tech/TBundle/Resources/config/ &&
rm -R src/Tech/TBundle/Resources/views/Tbdetusuarioacceso/ &&
php5 app/console cache:clear --env=prod &&
php5 app/console cache:clear --env=dev 



php5 app/console doctrine:generate: --entity=TechMyprojectBundle:Tbdetusuarioaccesos --route-prefix=UsuarioAcceso --with-write --format=yml

php5 app/console doctrine:generate: --entity=TechMyprojectBundle:Tbdetusuariodatos --route-prefix=Registro --with-write --format=yml

php5 app/console doctrine:generate: --entity=TechMyprojectBundle:Tbgenrol --route-prefix=Roles --with-write --format=yml

php5 app/console doctrine:generate: --entity=TechMyprojectBundle:Tbgentiporol --route-prefix=TiposRoles --with-write --format=yml

php5 app/console doctrine:generate: --entity=TechMyprojectBundle:Tblogestatususuario --route-prefix=EstatusUsuarios --with-write --format=yml

php5 app/console doctrine:generate: --entity=TechMyprojectBundle:Tbgenfunciones --route-prefix=Funciones --with-write --format=yml

php5 app/console doctrine:generate: --entity=TechMyprojectBundle:Tbgenrol --route-prefix=Parametros --with-write --format=yml

rm src/Tech/TBundle/Form/Tb*.php
mariana@mariana-Satellite-P755:~/Documents/Symfony/techproject$ rm src/Tech/TBundle/Entity/Tb*.php
mariana@mariana-Satellite-P755:~/Documents/Symfony/techproject$ rm src/Tech/TBundle/Controller/Tb*.php
mariana@mariana-Satellite-P755:~/Documents/Symfony/techproject$ rm -R src/Tech/TBundle/Resources/views/Tb*




Ver que pasa si el usuario no existe pero el contrato si .

    TechTBundle_Formulario:
        resource: "@TechTBundle/Resources/config/routing/formulario.yml"
        prefix:   /Formulario

    TechTBundle_PersonaPotencial:
        resource: "@TechTBundle/Resources/config/routing/personapotencial.yml"
        prefix:   /PersonaPotencial
  TechTBundle_PersonaForm:
        resource: "@TechTBundle/Resources/config/routing/personarelform.yml"
        prefix:   /PersonaForm
    TechTBundle_FormRel:
        resource: "@TechTBundle/Resources/config/routing/formulariorelacion.yml"
        prefix:   /FormRel

   TechTBundle_Pregunta:
        resource: "@TechTBundle/Resources/config/routing/preguntaform.yml"
        prefix:   /Pregunta

    TechTBundle_Respuesta:
        resource: "@TechTBundle/Resources/config/routing/respuestaform.yml"
        prefix:   /Respuesta


    TechTBundle_PregResRel:
        resource: "@TechTBundle/Resources/config/routing/pregresprel.yml"
        prefix:   /PregResRel











